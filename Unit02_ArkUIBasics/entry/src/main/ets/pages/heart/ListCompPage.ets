interface Student {
  id: string;
  name: string;
  major: string;
  grade: string;
  avatar: string;
}

@Entry
@Component
struct ListCompPage {
  @State title: string = ''

  aboutToAppear() {
    let params = this.getUIContext().getRouter().getParams() as Record<string, Object>
    if (params) {
      this.title = params['title'] as string
    }
  }

  @State students: Student[] = [
    {
      id: 'A001',
      name: 'å¼ ä¸‰',
      major: 'è®¡ç®—æœºç§‘å­¦',
      grade: 'å¤§äºŒ',
      avatar: 'ðŸ‘¨â€ðŸ’»'
    },
    {
      id: 'A002',
      name: 'æŽå››',
      major: 'è½¯ä»¶å·¥ç¨‹',
      grade: 'å¤§ä¸‰',
      avatar: 'ðŸ‘©â€ðŸ’»'
    },
    {
      id: 'A003',
      name: 'çŽ‹äº”',
      major: 'æ•°æ®ç§‘å­¦',
      grade: 'å¤§ä¸€',
      avatar: 'ðŸ‘¨â€ðŸŽ“'
    },
    {
      id: 'A004',
      name: 'èµµå…­',
      major: 'äººå·¥æ™ºèƒ½',
      grade: 'å¤§å››',
      avatar: 'ðŸ‘©â€ðŸŽ“'
    },
    {
      id: 'A005',
      name: 'é’±ä¸ƒ',
      major: 'è®¡ç®—æœºç§‘å­¦',
      grade: 'å¤§äºŒ',
      avatar: 'ðŸ‘¨â€ðŸ’»'
    },
    {
      id: 'A006',
      name: 'å­™å…«',
      major: 'è½¯ä»¶å·¥ç¨‹',
      grade: 'å¤§ä¸€',
      avatar: 'ðŸ‘©â€ðŸ’»'
    }
  ];

  @Builder
  StudentItem(student: Student) {
    Row({ space: 15 }) {
      Text(student.avatar)
        .fontSize(32)
        .width(50)
        .height(50)
        .backgroundColor('#E3F2FD')
        .borderRadius(25)
        .textAlign(TextAlign.Center)

      Column({ space: 5 }) {
        Row() {
          Text(student.name)
            .fontSize(16)
            .fontWeight(FontWeight.Bold)
            .fontColor('#333333')

          Blank()

          Text(student.grade)
            .fontSize(14)
            .fontColor('#666666')
            .backgroundColor('#F0F0F0')
            .padding({
              left: 8,
              right: 8,
              top: 2,
              bottom: 2
            })
            .borderRadius(10)
        }
        .width('100%')

        Text(student.major)
          .fontSize(14)
          .fontColor('#999999')
          .alignSelf(ItemAlign.Start)
      }
      .layoutWeight(1)
      .alignItems(HorizontalAlign.Start)
    }
    .width('100%')
    .padding({
      left: 16,
      right: 16,
      top: 12,
      bottom: 12
    })
    .backgroundColor('#FFFFFF')
    .borderRadius(8)
  }

  build() {
    Navigation() {
      Column() {
        Text('å­¦ç”Ÿåå•')
          .fontSize(20)
          .fontWeight(FontWeight.Bold)
          .padding(16)

        List({ space: 8 }) {
          ForEach(this.students, (student: Student) => {
            ListItem() {
              this.StudentItem(student)
            }
            .onClick(() => {
              AlertDialog.show({
                message: `å­¦ç”Ÿä¿¡æ¯ï¼š\nå§“åï¼š${student.name}\nä¸“ä¸šï¼š${student.major}\nå¹´çº§ï¼š${student.grade}`,
                primaryButton: {
                  value: 'ç¡®å®š', action: () => {
                  }
                }
              });
            })
          }, (student: Student) => student.id)
        }
        .layoutWeight(1)
        .padding({ left: 16, right: 16 })
        .cachedCount(3)
      }
      .width('100%')
      .height('100%')
      .backgroundColor('#F5F5F5')
    }
    .title(this.title)
    .titleMode(NavigationTitleMode.Mini)
    .hideBackButton(false)
    .navBarWidth('100%')
    .navBarPosition(NavBarPosition.Start)
  }
}